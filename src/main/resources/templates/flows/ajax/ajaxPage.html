<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:tiles="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org" lang="en">

<head>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- This <head> section is only used for static prototyping purposes. At runtime, -->
<!-- Tiles will only use the body fragment defined with tiles:fragment="content",  -->
<!-- as specified at the corresponding views.xml file.                             -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

	<title>Spring + Webflow + Thymeleaf + Ajax Fragment	Sample</title>
	
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<!-- for ajax request we need to send csrf token along with the request -->
	<meta name="_csrf" th:content="${_csrf.token}">
	<meta name="_csrf_header" th:content="${_csrf.headerName}">

	<link rel="shortcut icon" type="image/x-icon" th:href="@{/resources/images/favicon.ico}">

	<script type="text/javascript" src="#" th:src="@{/resources/js/dojo/dojo.js.uncompressed.js}"></script>	
	<script type="text/javascript" src="#" th:src="@{/resources/js/spring/Spring.js}"></script>
	<script type="text/javascript" src="#" th:src="@{/resources/js/spring/Spring-Dojo.js.uncompressed.js}"></script>
		
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
<!-- Some styles and scripts are served from spring-js-resources-{ver}.jar at -->
<!-- runtime. Therefore not available for static prototyping. See the         -->
<!-- layouts/standard.html template file for detail.                          -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->

</head>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- START of the content to be included in the execution result.  -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- Only the markup inside this <body> would be required in this  -->
<!-- template if no static prototyping was intended.               -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<body tiles:fragment="content">

	<!-- <div>
		<h1>Welcome to Spring + Webflow + Thymeleaf + Ajax Fragment
			Sample</h1>
		<p>This sample demonstrates how to use Spring MVC and Spring Web
			Flow together with Thymeleaf.</p>
		<hr />
		<p>The key features illustrated in this sample include:</p>
		<ul>
			<li>A declarative navigation model enabling full browser button
				support and dynamic navigation rules</li>
			<li>A fine-grained state management model, including support for
				ConversationScope and ViewScope</li>
			<li>Modularization of web application functionality by domain
				use case, illustrating project structure best-practices</li>
			<li>Spring Expression Language (SpEL) integration</li>
			<li>Spring 3 formatting annotations @DateTimeFormat,
				@NumberFormat</li>
			<li>Spring MVC custom namespace</li>
			<li>Annotated POJO @Controllers for implementing RESTful user
				interactions.</li>
			<li>Declarative page authoring with Thymeleaf and its Spring
				MVC's integration features.</li>
			<li>A JavaScript API for decorating HTML elements with behaviors
				such as Ajax, validation, and effects.</li>
			<li>Exception handling support across all layers of the
				application</li>

		</ul>
	</div>
	<hr /> -->
	
	
	<div id="data" style="font-weight: bold;font-size:20px" th:fragment="data">
		Server Time-stamp :	<label th:text="${ajaxModel.currentDate}"></label>
	</div>


	<form id="triggerform" method="get" action="">
		<input type="submit" id="doUpdate" name="_eventId_updateData"
			value="Refresh" />
	</form>

	<script type="text/javascript">
		var _csrf_token = document.querySelector('meta[name="_csrf"]').getAttribute('content');
		var _csrf_header = document.querySelector('meta[name="_csrf_header"]').getAttribute('content');	
		
		Spring.addDecoration(new Spring.AjaxEventDecoration({
			formId : 'triggerform',
			elementId : 'doUpdate',
			event : 'onclick',
			params : {
				
			},
			headers : {
				[_csrf_header] :  _csrf_token
			}
		}));
		
	</script>
		
</body>
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- END of the content to be included in the execution result -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

</html>
